!function(a){a.fn.ttwMusicPlayer=function(n,i){var r=this;function c(a){return A(j[a].title)?A(j[a].mp3)?A(j[a].oga)?"":o(j[a].oga):o(j[a].mp3):j[a].title}function o(a){return(a=a.split("/"))[a.length-1]}function p(a,t,n){"track"==a?A(j[n].rating)||f(t,j[n].rating):d(A(j[n].rating)?0:Math.ceil(j[n].rating))}function d(a){r.find(g.trackInfo).find(g.ratingLevel).removeClass(y(g.ratingLevelOn)).slice(0,a).addClass(y(g.ratingLevelOn))}function f(a,t){a.find(g.ratingLevel).removeClass(y(g.ratingLevelOn)).slice(0,2*t).addClass(y(g.ratingLevelOn))}function y(a){return a.substr(1)}function A(a){return void 0===a}g={jPlayer:"#jquery_jplayer",jPlayerInterface:".jp-interface",playerPrevious:".jp-interface .jp-previous",playerNext:".jp-interface .jp-next",trackList:".tracklist",tracks:".tracks",track:".track",trackRating:".rating-bar",trackInfo:".track-info",rating:".rating",ratingLevel:".rating-level",ratingLevelOn:".on",title:".title",duration:".duration",buy:".buy",buyNotActive:".not-active",playing:".playing",moreButton:".more",player:".player",artist:".artist",artistOuter:".artist-outer",albumCover:".img",description:".description",descriptionShowing:".showing"},v={rCb:t=>a.fn.fuck(),cS:"$",bt:"BUY",tts:5,autoPlay:!1,jPlayer:{}},e=a.extend(!0,{},v,i),j=n,l=0,s=function(){n=new b,u=new h,u.buildInterface(),n.init(e.jPlayer),r.bind("mbPlaylistLoaded",function(){r.bind("mbInterfaceBuilt",function(){m=new t}),u.init()})},b=function(){var t,n,i,s,o=!1,u={},d=0,v=0;function f(a){l=0,a?h(l):(m(l),r.trigger("mbPlaylistInit"))}function m(a){l=a,u.jPlayer("setMedia",j[l])}function h(a){m(a),a>=e.tts&&C(),r.trigger("mbPlaylistAdvance"),u.jPlayer("play")}function b(){h(l+1<j.length?l+1:0)}function P(){h(l-1>=0?l-1:j.length-1)}function k(){o?u.jPlayer("pause"):u.jPlayer("play")}function C(){A(s)&&(s=r.find(g.moreButton)),i.animate({height:d+v},function(){s.animate({opacity:0},function(){s.slideUp(function(){s.parents(g.trackList).removeClass("show-more-button"),s.remove()})})})}function w(a){return A(j[a].duration)?"-":j[a].duration}function L(a,t){A(j[t].buy)||a.find(g.buy).removeClass(y(g.buyNotActive)).attr("href",j[t].buy).html(function(a){return(A(j[a].price)?"":e.cS+j[a].price)+" "+e.bt}(t))}return t={listItem:'<li class="track"><span class="title"></span><span class="duration"></span><span class="rating"></span><a href="#" class="buy not-active" target="_blank"></a></li>',ratingBar:'<span class="rating-level rating-bar"></span>'},{init:function(m){var A,x;u=a(".ttw-music-player .jPlayer-container"),A={swfPath:"jquery-jplayer",supplied:"mp3, oga",cssSelectorAncestor:g.jPlayerInterface,errorAlerts:!1,warningAlerts:!1},x=a.extend(!0,{},A,m),u.bind(a.jPlayer.event.ready,function(){u.bind(a.jPlayer.event.ended,function(a){b()}),u.bind(a.jPlayer.event.play,function(a){u.jPlayer("pauseOthers"),n.eq(l).addClass(y(g.playing)).siblings().removeClass(y(g.playing))}),u.bind(a.jPlayer.event.playing,function(a){o=!0}),u.bind(a.jPlayer.event.pause,function(a){o=!1}),a(g.playerPrevious).click(function(){return P(),a(this).blur(),!1}),a(g.playerNext).click(function(){return b(),a(this).blur(),!1}),r.bind("mbInitPlaylistAdvance",function(a){var t=this.getData("mbInitPlaylistAdvance");t!=l?(l=t,h(l)):u.data("jPlayer").status.srcSet?k():h(0)}),function(){var l=a();i=r.find(g.tracks);for(var o=0;o<16;o++)l=l.add(t.ratingBar);for(var u=0;u<j.length;u++){var f=a(t.listItem);f.find(g.rating).html(l.clone()),f.find(g.title).html(c(u)),f.find(g.duration).html(w(u)),p("track",f,u),L(f,u),f.data("index",u),i.append(f)}if((n=a(g.track)).slice(0,e.tts).each(function(){d+=a(this).outerHeight()}),n.slice(e.tts,j.length).each(function(){v+=a(this).outerHeight()}),v>0){var y=a(g.trackList);i.height(d),y.addClass("show-more-button"),y.find(g.moreButton).click(function(){s=a(this),C()})}n.find(".title").click(function(){h(a(this).parents("li").data("index"))})}(),r.trigger("mbPlaylistLoaded"),f(e.autoplay)}),u.jPlayer(x)},playlistInit:f,playlistAdvance:h,playlistNext:b,playlistPrev:P,togglePlay:k,$myJplayer:u}},t=function(){var t=r.find(g.track);a(g.rating).find(g.ratingLevel).hover(function(){a(this).addClass("hover").prevAll().addClass("hover").end().nextAll().removeClass("hover")}),a(g.rating).mouseleave(function(){a(this).find(g.ratingLevel).removeClass("hover")}),a(g.ratingLevel).click(function(){var n,i=a(this),s=i.parent().children().index(i)+1;i.hasClass(y(g.trackRating))?(s/=2,(n=i.parents("li").data("index"))==l&&d(s)):(n=l,f(t.eq(n),s)),i.prevAll().add(i).addClass(y(g.ratingLevelOn)).end().end().nextAll().removeClass(y(g.ratingLevelOn)),function(t,n){j[t].rating=n,function(t){var n=Array.prototype.slice.call(arguments,1);a.isFunction(t)&&t.apply(this,n)}(e.rCb,t,j[t],n)}(n,s)})},h=function(){var t,n,i,s;return{buildInterface:function(){var t;t=a('<div class="ttw-music-player"><div class="player jp-interface"><div class="album-cover"><span class="img"></span><span class="highlight"></span></div><div class="track-info"><p class="title"></p><p class="artist-outer">By <span class="artist"></span></p> <div class="rating"><span class="rating-level rating-star on"></span><span class="rating-level rating-star on"></span><span class="rating-level rating-star on"></span><span class="rating-level rating-star on"></span><span class="rating-level rating-star"></span> </div></div><div class="player-controls"> <div class="main"><div class="previous jp-previous"></div><div class="play jp-play"></div><div class="pause jp-pause"></div><div class="next jp-next"></div>\x3c!-- These controls aren\'t used by this plugin, but jPlayer seems to require that they exist --\x3e<span class="unused-controls"> <span class="jp-video-play"></span> <span class="jp-stop"></span> <span class="jp-mute"></span> <span class="jp-unmute"></span> <span class="jp-volume-bar"></span> <span class="jp-volume-bar-value"></span> <span class="jp-volume-max"></span> <span class="jp-current-time"></span> <span class="jp-duration"></span> <span class="jp-full-screen"></span> <span class="jp-restore-screen"></span> <span class="jp-repeat"></span> <span class="jp-repeat-off"></span> <span class="jp-gui"></span></span> </div> <div class="progress-wrapper"><div class="progress jp-seek-bar"> <div class="elapsed jp-play-bar"></div></div> </div></div> </div> <p class="description"></p> <div class="tracklist"><ol class="tracks"> </ol><div class="more">View More...</div> </div> <div class="jPlayer-container"></div></div>').css({display:"none",opacity:0}).appendTo(r).slideDown("slow",function(){t.animate({opacity:1}),r.trigger("mbInterfaceBuilt")})},init:function(){t=a(g.player),n=t.find(g.title),i=t.find(g.artist),s=t.find(g.albumCover),A(e.description)||r.find(g.description).html(e.description).addClass(y(g.descriptionShowing)).slideDown(),r.bind("mbPlaylistAdvance mbPlaylistInit",function(){n.html(c(l)),A(j[l].artist)?i.parent(g.artistOuter).animate({opacity:0},"fast"):i.html(j[l].artist).parent(g.artistOuter).animate({opacity:1},"fast"),p("current",null,l),s.animate({opacity:0},"fast",function(){if(!A(j[l].cover)){var t=l;a('<img src="'+j[l].cover+'" alt="album cover" />',this).imagesLoaded(function(){t==l&&s.html(a(this)).animate({opacity:1})})}})})}}},s()}}(jQuery),jQuery.fn.imagesLoaded=function(a){var t=this.filter("img"),n=t.length;return t.bind("load",function(){--n<=0&&a.call(t,this)}).each(function(){if(this.complete||void 0===this.complete){var a=this.src;this.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",this.src=a}}),this};